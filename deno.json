{
  "tasks": {
    "start": "deno task backend:dev 8000 & deno task frontend:dev",
    "frontend:dev": "cd src/frontend && deno task dev",
    "frontend:build": "cd src/frontend && deno install && deno task build && cd ../.. && rm -rf ./src/dist/build && mv src/frontend/dist src/dist/build",
    "backend:dev": "deno -A src/backend/server.ts",
    "webview": {
      "command": "deno -A src/webview/webview.ts",
      "dependencies": [
        "frontend:build"
      ]
    },
    "compile": {
      "command": "deno compile -o record --include src/webview/app.worker.ts --include src/dist -A src/webview/webview.ts",
      "dependencies": [
        "frontend:build"
      ]
    },
    "flatpak": {
      "command": "cd distro && flatpak-builder build-dir io.github.sigmasd.recordapps.yml --force-clean --user --install && flatpak run io.github.sigmasd.recordapps",
      "dependencies": [
        "compile"
      ]
    }
  },
  "workspace": [
    "./src/frontend"
  ],
  "nodeModulesDir": "auto",
  "exclude": [
    "src/dist/build"
  ],
  "imports": {
    "@std/fs": "jsr:@std/fs@^1.0.19",
    "@std/http": "jsr:@std/http@^1.0.20",
    "@webview/webview": "jsr:@webview/webview@^0.9.0",
    "@sigmasd/adw-app": "jsr:@sigmasd/adw-app@^0.1.3",
    "@std/assert": "jsr:@std/assert@^1.0.14",
    "capnweb": "npm:capnweb@0.1.0"
  },
  "fmt": {
    "exclude": [
      "distro/io.github.sigmasd.recordapps.metainfo.xml"
    ]
  }
}
